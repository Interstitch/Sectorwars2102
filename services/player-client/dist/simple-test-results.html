
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Simple API Test Results</title>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      max-width: 900px;
      margin: 0 auto;
      padding: 20px;
      line-height: 1.6;
    }
    h1, h2 { color: #0366d6; }
    .success { color: #28a745; }
    .error { color: #dc3545; }
    .skipped { color: #6c757d; }
    .test-result {
      margin-bottom: 20px;
      padding: 15px;
      border-radius: 5px;
      box-shadow: 0 1px 3px rgba(0,0,0,0.12);
    }
    .test-result.success { background-color: #f1f8e9; }
    .test-result.error { background-color: #fff8f8; }
    .test-result.skipped { background-color: #f8f9fa; }
    .test-info {
      margin-bottom: 10px;
      display: flex;
      justify-content: space-between;
    }
    pre {
      background-color: #f6f8fa;
      padding: 15px;
      border-radius: 4px;
      overflow: auto;
    }
    .env-info {
      background-color: #f0f7ff;
      padding: 15px;
      border-radius: 5px;
      margin-bottom: 20px;
    }
    .summary {
      margin-top: 30px;
      padding: 10px;
      background-color: #f6f8fa;
      border-radius: 5px;
      text-align: center;
    }
    .timestamp {
      color: #6c757d;
      font-size: 0.9em;
      text-align: center;
      margin-top: 20px;
    }
    .recommendations {
      background-color: #f1f8e9;
      padding: 15px;
      border-radius: 5px;
      margin-top: 30px;
    }
    .recommendations h3 {
      margin-top: 0;
    }
    .recommendations li {
      margin-bottom: 10px;
    }
  </style>
</head>
<body>
  <h1>Simple API Test Results</h1>
  
  <div class="env-info">
    <h2>Environment Information</h2>
    <pre>{
  "nodeVersion": "v18.20.8",
  "platform": "linux",
  "isCodespaces": false,
  "codespaceUrl": null,
  "hostname": "8b6fc9f32839",
  "env": {
    "NODE_ENV": "development",
    "API_URL": "http://gameserver:8080"
  }
}</pre>
  </div>
  
  <h2>Test Results</h2>
  
    <div class="test-result success">
      <div class="test-info">
        <h3>API via container name</h3>
        <span class="success">
          ✅ Success (200)
        </span>
      </div>
      <div><strong>URL:</strong> http://gameserver:8080/api/v1/status</div>
      <div><strong>Status:</strong> 200</div>
           <div><strong>Response:</strong></div>
           <pre>{
  "message": "Game API Server is operational",
  "environment": "development",
  "status": "healthy",
  "api_version": "v1",
  "debug": {
    "host": "gameserver:8080",
    "origin": "",
    "x-forwarded-host": "",
    "x-forwarded-proto": "",
    "headers": {
      "user-agent": "Node.js Simple Test",
      "host": "gameserver:8080",
      "connection": "close"
    },
    "url": "http://gameserver:8080/api/v1/status",
    "base_url": "http://gameserver:8080/",
    "method": "GET",
    "client": "172.18.0.2",
    "timestamp": "2025-05-18T19:24:31.533781"
  }
}</pre>
    </div>
  
    <div class="test-result success">
      <div class="test-info">
        <h3>API via Docker gateway</h3>
        <span class="success">
          ✅ Success (200)
        </span>
      </div>
      <div><strong>URL:</strong> http://172.18.0.1:8080/api/v1/status</div>
      <div><strong>Status:</strong> 200</div>
           <div><strong>Response:</strong></div>
           <pre>{
  "message": "Game API Server is operational",
  "environment": "development",
  "status": "healthy",
  "api_version": "v1",
  "debug": {
    "host": "172.18.0.1:8080",
    "origin": "",
    "x-forwarded-host": "",
    "x-forwarded-proto": "",
    "headers": {
      "user-agent": "Node.js Simple Test",
      "host": "172.18.0.1:8080",
      "connection": "close"
    },
    "url": "http://172.18.0.1:8080/api/v1/status",
    "base_url": "http://172.18.0.1:8080/",
    "method": "GET",
    "client": "172.18.0.1",
    "timestamp": "2025-05-18T19:24:31.551251"
  }
}</pre>
    </div>
  
    <div class="test-result error">
      <div class="test-info">
        <h3>API via localhost</h3>
        <span class="error">
          ❌ Failed
        </span>
      </div>
      <div><strong>URL:</strong> http://localhost:8080/api/v1/status</div>
      <div><strong>Error:</strong> connect ECONNREFUSED ::1:8080</div>
    </div>
  
    <div class="test-result skipped">
      <div class="test-info">
        <h3>API via proxy (relative URL)</h3>
        <span class="skipped">
          ⏭️ Skipped
        </span>
      </div>
      <div><strong>URL:</strong> /api/v1/status</div>
      <div><strong>Note:</strong> Relative URLs cannot be tested server-side, only in browser</div>
    </div>
  
    <div class="test-result success">
      <div class="test-info">
        <h3>External site (Google)</h3>
        <span class="success">
          ✅ Success (200)
        </span>
      </div>
      <div><strong>URL:</strong> https://www.google.com</div>
      <div><strong>Status:</strong> 200</div>
           <div><strong>Response:</strong></div>
           <pre><!doctype html><html itemscope="" itemtype="http://schema.org/WebPage" lang="en"><head><meta content="Search the world's information, including webpages, images, videos and more. Google has many speci...</pre>
    </div>
  
  
  <div class="summary">
    <h2>Summary</h2>
    <p>3 of 4 tests passed successfully (1 skipped).</p>
  </div>

  <div class="recommendations">
    <h3>Recommendations</h3>
    <p>Based on the test results, here are the recommended URL patterns for API requests:</p>
    <ul>
      <li><strong>API via container name:</strong> http://gameserver:8080/api/v1/status</li><li><strong>API via Docker gateway:</strong> http://172.18.0.1:8080/api/v1/status</li><li><strong>External site (Google):</strong> https://www.google.com</li>
    </ul>
    <p><strong>For Docker environments:</strong></p>
    <ul>
      <li>Server-to-server communication: Use <code>http://gameserver:8080</code> for reliable communication within the Docker network</li>
      <li>Browser requests: Use relative URLs with the Vite proxy (e.g., <code>/api/v1/status</code>)</li>
    </ul>
    <p><strong>For GitHub Codespaces:</strong></p>
    <ul>
      <li>Server-to-server communication: Use <code>http://gameserver:8080</code> inside the Docker network</li>
      <li>Browser requests: Use relative URLs with the Vite proxy to avoid CORS and port-doubling issues</li>
    </ul>
    <p>Read the <a href="/API_TEST_README.md">API Testing Documentation</a> for more detailed information.</p>
  </div>
  
  <div class="timestamp">
    Test ran at: 2025-05-18T19:24:31.715Z
  </div>
</body>
</html>
  